SSH. Протокол удалённого администрирования.
#############################################

:date: 2022-05-13
:summary: В лабораторной работе рассматривается основные принципы работы протокола удалённого администрирования SSH.
:author: Малышева Е.В., Б06-007
:status: published

.. contents:: **Содержание**


Общие сведения
~~~~~~~~~~~~~~~
SSH (от англ. secure shell -- безопасная оболочка) это набор программ, которые позволяют регистрироваться на компьютере по сети, удаленно выполнять на нем команды, а также копировать и перемещать файлы между компьютерами. SSH организует защищенное безопасное соединение поверх небезопасных каналов связи.
Также существует SSH-туннель — это туннель, создаваемый посредством SSH-соединения и используемый для шифрования туннелированных данных. Используется для того, чтобы обезопасить передачу данных в Интернете. При пересылке через SSH-туннель незашифрованный трафик любого протокола шифруется на одном конце SSH-соединения и расшифровывается на другом.

Принцип работы
~~~~~~~~~~~~~~~
Рассмотрим принцип действия SSH. Для работы по SSH нужен SSH-сервер и SSH-клиент. Сервер прослушивает соединения от клиентских машин и при установлении связи производит аутентификацию, после чего начинает обслуживание клиента. Клиент используется для входа на удалённую машину и выполнения команд. Аутентификация происходит обычно с помощью ключа (иногда пароля, но ключ безопаснее) Ключ состоит из открытой и закрытой части. Открытая кладётся в домашний каталог пользователя, «которым» заходят на сервер, закрытая — в домашний каталог пользователя, который идёт на удалённый сервер. Половинки сравниваются и происходит "вход" (или же его не происходит). Авторизуется не только клиент на сервере, но и сервер по отношению к клиенту (то есть у сервера есть свой собственный ключ). Главной особенностью ключа по сравнению с паролем является то, что его нельзя «украсть», взломав сервер — ключ не передаётся с клиента на сервер, а во время авторизации клиент доказывает серверу, что владеет ключом. Свой ключ можно сгенерировать с помощью команды ssh-keygen.

Преимущества использования SSH
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Использование SSH подключения имеет ряд преимуществ:

* Безопасная работа на удаленном ПК с использованием командной оболочки;
* Использование разных алгоритмов шифрования (симметричного, асимметричного и хеширования);
* Возможность безопасного использования любого сетевого протокола, что позволяет передавать по защищенному каналу файлы любого размера.

Работа с ключами
~~~~~~~~~~~~~~~~~
id_psa приватный ключ для расшифровки, его не надо давать никому
id_psa.pub публичный ключ для шифрования данных
Легко создавать их парой, а вот по публичному найти приватный трудно. 

Как создать эти ключи:
Ssh keygen
Id

scp -P 55078 id.pub @remote.mipt
Ssh -p …..
Ключ надо поместить в настройки ssh
Cat id.pub>> ~/.ssh/authorized_keys
Rm id.pub
Ssh -i ./id -p @   заходим без пароля
Cat id.pub | ssh -p 55078 @ ‘’cat >> ~/.ssh/authorized_keys’’ делаем то же самое, но в одну строчку. (катаем файл с компа, а он оказывается на серваке - магия, не иначе. Быстрый способ скопировать) 

Так пароль можно уже не прописывать. Наш личный ключ запоминается 


Основные команды
~~~~~~~~~~~~~~~~~~
Существуют различные программные пакеты для всех Unix-подобных систем. Для OS Linux имеется свой набор программ (сервер+клиент), обеспечивающий работу по SSH - lsh и openssh. Рассмотрим базовые примеры команд:

* **ls** -	Показать содержимое каталога (список названий файлов)
* **cd** -	Сменить каталог
* **mkdir** -	Создать новую папку (каталог)
* **touch** -	Создать новый файл
* **rm** -	Удалить файл
* **cat** -	Показать содержимое файла
* **pwd** -	Показать текущий каталог (полный путь к этому каталогу)
* **cp** -	Копировать файл/папку
* **mv** -	Переместить файл/папку
* **grep** -	Поиск конкретной фразы в файле
* **find** -	Поиск файлов и папок
* **vi** и **nano** -	Текстовые редакторы
* **history** -	Показать 50 последних использованных команд
* **clear** -	Очистить окно терминала. 

Что умеет делать SSH
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1)	удаленный доступ
2)	Перебрасывать порты  
Ssh -D 5000 -i id @vdi.mipt.ru это мы на компы Мфти. Запускает порт 5000ый на моем компе и пересылает на сервак. Что это означает. Комп подключился к серверу по порту 5000. Если на компе установить настройки сети порт 5000, то все запросы отправляются на сервак. ТО есть если на моем компе нет интернета, но я сделала такую штуку, то интернет у меня таким образом будет, тк он будет браться из сервака. За интернет можно не платить)) полный безлимит 

-L <port> :adres : <port> прокидка портов 
Ssh -C -L 5000:localhost:6000  -i id @vdi.mipt.ru (-C сжимает)

С любого компа можно подключиться на другой комп, даже если он не рядом. Это все через ssh можно сделать. 


